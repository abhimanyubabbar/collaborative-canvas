<!doctype html>
<html>

<head>
  <title>Test Sockets</title>
  <!-- Get version 1.1.0 of Fabric.js from CDN -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/1.7.9/fabric.js"></script>

  <!-- Get the highest 1.X version of jQuery from CDN. Required for ready() function. -->
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

</head>

<body>

  <canvas id="c" style="border:1px solid black;"></canvas>
  <canvas id="c2" style="border:1px solid black;"></canvas>

  <script type="text/javascript" src="/socket.io/socket.io.js"></script>
  <script type="text/javascript">
    $(function() {

      var socket = io();
      var canvas = new fabric.Canvas('c', {
        isDrawingMode: true
      });

      var canvas2 = new fabric.Canvas('c2', {
        isDrawingMode: true
      });

      canvas.on('path:created', function(e) {

        var path = e.path.toJSON();
        console.log(path);

        fabric.util.enlivenObjects([path], function(objects) {
          objects.forEach(function(o) {
            canvas2.add(o);
          });
        });

      });

    });

  </script>
</body>

</html>
